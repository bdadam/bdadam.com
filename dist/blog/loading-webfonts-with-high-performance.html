<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Loading webfonts with high performance on responsive websites</title><meta name="description" content="Optimally loading webfonts is not a trivial taks. Here is a simple guide, how to do it. No blinking, no blocking."><meta property="og:description" content="Once upon a time every website was only using Arial, Verdana, Garamond or Times New Roman for rendering the text, because these font were the only ones reliably installed on almost any computer. But these times are over. Webfonts are spread all over the internet, but we still don&#x27;t really know, how to load them efficiently."><script>!function(){function a(a){var b=document.createElement("style");b.rel="stylesheet",document.head.appendChild(b),b.textContent=a}var b="sourceSansProV1";try{if(localStorage[b])a(localStorage[b]);else{var c=new XMLHttpRequest;c.open("GET","/static/source-sans-pro.woff.css?v1",!0),c.onload=function(){c.status>=200&&c.status<400&&(localStorage[b]=c.responseText,a(c.responseText))},c.send()}}catch(d){}}();</script><style>*{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;padding:0;margin:0}html{font-size:100%}body{font-size:1.375rem;font-family:Source Sans Pro,sans-serif;line-height:1.46;color:#333}ul,ol{list-style-position:inside;padding-bottom:12px}p{margin-bottom:16px}strong{font-weight:600}.container{margin:0 auto;padding:0 20px}@media screen and min-width (34em){.container{padding:0}}.main{max-width:34em}h1,h2,h3,h4,h5,h6{line-height:1.2;margin:.6em 0 .3em;font-weight:600}h1{font-size:2.5rem;margin-top:0}h2{font-size:2rem}hr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee;height:0}img{max-width:100%}iframe{width:100%;border:0}a{text-decoration:none;color:#428bca}a:hover,a:active{text-decoration:underline;color:#2a6496}pre{max-width:100%;overflow-x:auto;padding:0;background-color:transparent;margin-bottom:12px}pre code{padding:.5em;display:block}.silent{color:#999;font-size:1rem}.center{text-align:center}button{padding:4px;font-size:1rem}small{color:#999;font-size:1rem}li ul,li ol{margin-left:24px}.menu-icon{position:relative;float:right;top:-3px;width:4em;text-align:center}.menu-icon span{background-color:#f1f1f1;border:1px solid #999;border-radius:4px;padding:3px 8px;color:#333}nav{display:block;position:relative;background-color:#34495E;vertical-align:middle;text-transform:uppercase}nav .brand{font-weight:600;font-size:1.25rem}nav #menu{display:none}nav #menu a{display:block}nav a{color:#fff;line-height:1;display:inline-block;vertical-align:middle;padding:1rem 0}nav a:hover,nav a:active{color:#fff}.btn-readmore{display:block;text-align:center;padding:5px 12px;border-radius:4px;background-color:#0095d5;color:#fff;text-transform:uppercase}.btn-readmore:hover{text-decoration:none;background-color:#0071a2;color:#fff}.btn-readmore:active{text-decoration:none;background-color:#004e6f;color:#fff}footer{padding:24px 0;text-align:center;background-color:#f1f1f1;border-top:1px solid #ddd;margin-top:32px}.share-bar{margin-top:12px;padding:12px 0;border-top:1px solid #dedede;border-bottom:1px solid #dedede;line-height:1;text-align:center}.btn-share{padding:6px 12px;display:inline-block;margin:8px;font-size:1rem;vertical-align:text-bottom}.btn-share:link,.btn-share:visited,.btn-share:hover,.btn-share:active{color:#fff;text-decoration:none}.btn-share:hover,.btn-share:active{box-shadow:1px 1px 2px rgba(0,0,0,.85);box-shadow:0 0 3px rgba(127,127,127,.65)}.btn-share .fa{font-size:14px;padding-right:3px;border-right:1px solid #fff;vertical-align:text-bottom}.btn-share.fb{background-color:#3b5998}.btn-share.tw{background-color:#00aced}.btn-share.li{background-color:#007bb6}.btn-share.gp{background-color:#dd4b39}.btn-share.cm{background-color:#959}h1.site-title{position:absolute;bottom:8px;text-align:center;width:100%;font-size:2rem;margin:0}h2{font-weight:600}h2 a,h2 a:link,h2 a:visited,h2 a:hover,h2 a:active{color:#333}.full-post{margin-top:24px}.index-head{position:relative;height:280px;border-bottom:1px solid #dedede;background-image:url(/static/img/bg_480.jpg);background-position:center top;background-repeat:no-repeat}.abstract{font-weight:600;line-height:1.6}.article-image{display:block;border:1px solid #dedede;margin:0 auto}@media screen and (min-width:768px){.article-image{float:right;display:inline-block;margin-left:20px;margin-bottom:12px}}.social-links{display:block}@media screen and (min-width:480px){.index-head{background-image:url(/static/img/bg_1024.jpg)}}@media screen and (min-width:768px){nav .menu-icon{display:none}nav #menu{display:inline-block}nav #menu a{display:inline-block;margin-left:32px}}@media screen and (min-width:1024px){.index-head{background-image:url(/static/img/bg_1920.jpg)}}</style><link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/bdadamcom"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Adam Beres-Deak"><meta name="viewport" content="width=device-width"><link rel="apple-touch-icon" sizes="57x57" href="/static/img/favico/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="114x114" href="/static/img/favico/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="72x72" href="/static/img/favico/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="144x144" href="/static/img/favico/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="60x60" href="/static/img/favico/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="120x120" href="/static/img/favico/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="76x76" href="/static/img/favico/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="152x152" href="/static/img/favico/apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="/static/img/favico/favicon-196x196.png" sizes="196x196"><link rel="icon" type="image/png" href="/static/img/favico/favicon-160x160.png" sizes="160x160"><link rel="icon" type="image/png" href="/static/img/favico/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/static/img/favico/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/static/img/favico/favicon-16x16.png" sizes="16x16"><meta name="msapplication-TileColor" content="#aa2211"><meta name="msapplication-TileImage" content="/static/img/favico/mstile-144x144.png"></head><body><nav><div class="container main"><a class="brand" href="/">bdadam.com</a> <a class="menu-icon" href="#"><span class="menu-icon">menu</span></a><div id="menu"><a href="/javascript-goodies.html">JavaScript Goodies</a> <a href="/about.html">Contact</a></div></div></nav><article class="container main full-post"><h1>Loading webfonts with high performance on responsive websites</h1><p class="silent">8th October 2014 | by <a href="/about.html">Adam Beres-Deak</a> | <i class="fa fa-tags"></i> localStorage, webfonts, loading, perfmatters</p><div class="abstract"><p>Once upon a time every website was only using Arial, Verdana, Garamond or Times New Roman for rendering the text, because these font were the only ones reliably installed on almost any computer. But these times are over. Webfonts are spread all over the internet, but we still don&#x27;t really know, how to load them efficiently.</p></div><img src="/static/article-assets/pagespeed99.jpg?w=320" class="article-image"><p>Here is my simple guide on what to do, to offer the optimal user experience without having to avoid the expensive accessories (aka webfonts).</p><h2 id="0-tldr">0. TLDR</h2><p>The essence of the technique:</p><ol><li>Only serve fonts in woff format</li><li>Other browsers get the old &quot;websafe&quot; fonts</li><li>Download the font in &quot;binary&quot; format and optimize it</li><li>Serve the fonts yourself</li><li>Serve them as CSS files - base64 encoded data URIs</li><li>If the user doesn&#39;t have the font, load it asynchronously and store in localStorage</li><li>Otherwise load it from localStorage without accessing the server</li><li>Have fun because your site renders much faster and your users have a much better usability experience</li></ol><p>For those who are still reading here are my explanations for the points above.</p><p><a id="update1"></a></p><h3 id="update-2014-10-09">Update - 2014/10/09</h3><p>If you don&#39;t believe in this optimization, I created two demo pages. Just test them and take a look at how resources are loaded, what is blocking, what isn&#39;t.</p><ol><li><a href="/samples/webfonts-conventional.html" target="_blank">Demo page: Loading from Google Fonts</a></li><li><a href="https://developers.google.com/speed/pagespeed/insights/?url=http%3A%2F%2Fbdadam.com%2Fsamples%2Fwebfonts-conventional.html" rel="external" target="_blank">Page Speed Insights: Loading with Google Fonts (79/100)</a></li><li><a href="/samples/webfonts-optimized.html" target="_blank">Demo page: Loading Asynchronously and serving from localStorage later on</a></li><li><a href="https://developers.google.com/speed/pagespeed/insights/?url=http%3A%2F%2Fbdadam.com%2Fsamples%2Fwebfonts-optimized.html" rel="external" target="_blank">Page Speed Insights: Async loading/localStorage (100/100)</a></li></ol><h2 id="1-browser-support">1. Browser support</h2><p>According to <a href="http://caniuse.com/#search=woff">caniuse</a>, 84% of users&#39; browsers support <code>woff</code> format. The only exceptions are the usual old browsers - IE8 and old stock android browsers. Therefore it is mostly enough to only provide webfonts for the modern browsers which support the <code>woff</code> format. The old ones should only show a fallback font (e.g. Arial). The users will also be thankful for having better performance browsing your website. Just try to find something which fits in your design.</p><h2 id="2-don-t-use-external-providers-like-google-fonts-or-typekit">2. Don&#39;t use external providers like Google Fonts or Typekit</h2><p>They either cause many extra blocking requests or annoying blinking if loading asynchronously. We&#39;ll see shortly that there is a much better way of serving webfonts.</p><h2 id="3-the-licence-matters">3. The licence matters</h2><p>Choose a webfont which you can serve yourself. Unfortunately not every licence allows this. Fortunately there are many which do - like the open source ones. Some of them are Open Sans or Source Sans Pro. When you found your font, download the &quot;binary&quot; files (otf or ttf).</p><h2 id="4-optimizing-reducing-size-generating-the-css">4. Optimizing, reducing size, generating the CSS</h2><p>Head on over to the <a href="http://www.fontsquirrel.com/tools/webfont-generator">Font Squirrel Webfont Generator</a>.</p><p>When choosing expert mode we can choose to remove some charsets. You have to decide which character sets you really need. Is your content only in english? Then you just need a basic subset. Is your content in chineese? Then you most probably need everything.</p><p>It is important to choose the option to generate CSS files which contains the base64 encoded fonts. This file is what we really need.</p><h2 id="5-serving-the-css-file">5. Serving the CSS file</h2><p>This file is going to be quite large (up to 100-300 kB) depending on your choice on charsets and the other options. Therefore it is important to gzip it correctly and setting strong cacheability when serving it to the users.</p><p>Fortunately you are going to serve this file only once for your visitors. The first time, when the user doesn&#39;t have the font file, their browser downloads it asynchronously and stores it in localStorage. This time users with slower connections can see when the browsers repaints the fallback fonts with your webfonts, but it only happens at most once. Many users won&#39;t notice anything at all.</p><p>From the second page load on you just load the CSS file from the localStorage. Which is reasonably fast (5-50ms). The users won&#39;t see any blinking, because all the operations are synchronous, but only take a couple of milliseconds.</p><h2 id="6-show-me-the-code">6. Show me the code</h2><p>Since we store the file in localStorage this technique only needs client side code. Here you are.</p><pre><code class="language-html">&lt;head&gt;
...
&lt;script&gt;
(function(){
    function addFont() {
        var style = document.createElement(&#39;style&#39;);
        style.rel = &#39;stylesheet&#39;;
        document.head.appendChild(style);
        style.textContent = localStorage.sourceSansPro;
    }

    try {
        if (localStorage.sourceSansPro) {
            // The font is in localStorage, we can load it directly
            addFont();
        } else {
            // We have to first load the font file asynchronously
            var request = new XMLHttpRequest();
            request.open(&#39;GET&#39;, &#39;/path/to/source-sans-pro.woff.css&#39;, true);

            request.onload = function() {
                if (request.status &gt;= 200 &amp;&amp; request.status &lt; 400) {
                    // We save the file in localStorage
                    localStorage.sourceSansPro = request.responseText;

                    // ... and load the font
                    addFont();
                }
            }

            request.send();
        }
    } catch(ex) {
        // maybe load the font synchronously for woff-capable browsers
        // to avoid blinking on every request when localStorage is not available
    }
}());
&lt;/script&gt;
...
&lt;/head&gt;</code></pre><h2 id="7-what-did-we-achieve">7. What did we achieve</h2><ol><li>Eliminated at least one - but typically many - blocking requests</li><li>At most one blinking for the user when the fallback font gets replaced by the webfont (first visit, first request)</li><li>Faster render time on the first page request</li><li>Better score on Google Page Speed Insights and WebPageTest.org</li></ol><h2 id="8-see-it-in-action">8. See it in action</h2><p>This technique is used on my blog. You can test it with your smartphone, tablet or laptop. It&#39;s fast, I promise. :)</p><p><strong>There are still some fine details which are missing from this post. If you have questions or feedback, you are welcome to leave a <a href="#comments">comment</a>.</strong></p><p><a id="update2"></a></p><h3 id="update-2014-10-11">Update - 2014/10/11</h3><p>A Twitter user, @Kseso, made me aware of another method, which also proceeds to a 99/100 score on Google Page Speed Insights. The method is to inline the CSS what Google Fonts delivers.</p><p>I advise against this method, because it delays text rendering quite a lot. So let&#39;s take a deeper look what happens here.</p><ol><li>We define font faces directly in the HTML file like this:<pre><code class="language-html">&lt;head&gt;
...
&lt;style&gt;
@font-face {
font-family: &#39;Source Sans Pro&#39;;
font-style: normal;
font-weight: 400;
src: local(&#39;Source Sans Pro&#39;),
  local(&#39;SourceSansPro-Regular&#39;),
  url(http://fonts.gstatic.com/s/sourcesanspro/v9/ODelI1aHBYDBqgeIAH2zlBBHWFfxJXS04xYOz0jw624.woff) format(&#39;woff&#39;);
}
&lt;/style&gt;
...
&lt;/head&gt;</code></pre></li><li>The browser doesn&#39;t start to fetch the font file, until it doesn&#39;t know whether it is needed at all somewhere in the page.</li><li>The browser waits until DOM and CSSOM are constructed</li><li>The browser starts to fetch the font file from Google Fonts (please notice, there is also an extra DNS request for fonts.gstatic.com). <img src="/static/article-assets/gfonts-timeline.jpg" alt="Timeline of loading fonts from Google Fonts"> This timeline shows that the browser only starts fetching the font file, just before the DOMContentLoaded event.</li><li>If this wasn&#39;t bad enough, most browsers will just render blank text, where those font faces are used:<ol><li>Only IE starts rendering <strong>immediately</strong> with the fallback font</li><li>Firefox and Chrome35+ wait for the font download to complete <strong>with a 3 seconds timeout</strong> (after which the fallback font is used)</li><li>Safari and Chrome pre 35 wait for the font download to complete <strong>without any timeout</strong></li></ol></li></ol><p>Therefore on slow connections you will delay rendering of your text content up to 3 seconds in most browsers. In worst case, if your font takes ages to load (e.g. because of bad mobile connection), Safari users will never see your text content and just leave your page. Your users can end up seeing a white page until the timeout kicks in.</p><p>More info can be found on <a href="https://www.igvita.com/2012/09/12/web-fonts-performance-making-pretty-fast/" rel="external">Ilya Gregorik&#39;s blog</a>.</p><p>I also created <a href="/samples/webfonts-googlefonts.html" target="_blank">a test page</a>, where you can check it out yourself.</p><p><a class="silent" href="https://plus.google.com/116380265342833844173?rel=author">by Adam Beres-Deak</a></p><p class="share-bar"></p><a id="comments"></a><div id="disqus_thread"></div><h4>Latest blog posts</h4><p><a href="/blog/video-douglas-crockford-about-the-new-good-parts.html">Worth watching: Douglas Crockford speaking about the new good parts of JavaScript in 2014 <span class="muted"><small>20th October 2014</small></span></a></p><p><a href="/blog/automatically-adapting-the-height-textarea.html">Automatically adjusting the height of a textarea to its content text <span class="muted"><small>16th October 2014</small></span></a></p><p><a href="/blog/optimistic-page-loading-with-instantclick-io.html">Loading web pages really fast - optimistic page loading with Instantclick.io <span class="muted"><small>8th October 2014</small></span></a></p><p><a href="/blog/generating-sound-effects-with-client-side-javascript.html">Generating sound effects with client side JavaScript <span class="muted"><small>6th April 2014</small></span></a></p></article><footer><p>Adam Beres-Deak &copy; 2014 <span class="social-links"><a href="mailto:me@bdadam.com"><i class="fa fa-envelope"></i></a>&nbsp;&nbsp; <a href="http://github.com/bdadam" rel="external,nofollow"><i class="fa fa-github"></i></a>&nbsp;&nbsp; <a href="https://twitter.com/bdadamm" rel="external,nofollow"><i class="fa fa-twitter"></i></a>&nbsp;&nbsp; <a href="https://www.xing.com/profile/Adam_BeresDeak" rel="external,nofollow"><i class="fa fa-xing"></i></a>&nbsp;&nbsp; <a href="https://plus.google.com/116380265342833844173?rel=author"><i class="fa fa-google-plus-square"></i></a></span> <a rel="external" href="http://feeds.feedburner.com/bdadamcom">RSS</a></p><p class="silent container">Except where otherwise noted, content on this site is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/" rel="external,noindex,nofollow">Creative Commons Attribution 4.0 International license</a>. Code samples are licensed under the MIT license.</p></footer><script data-no-instant>(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports=function(t,e){function n(t){var e=t.indexOf("#");return 0>e?t:t.substr(0,e)}function r(t){for(;"A"!=t.nodeName;)t=t.parentNode;return t}function i(t){do{if(!t.hasAttribute)break;if(t.hasAttribute("data-instant"))return!1;if(t.hasAttribute("data-no-instant"))return!0}while(t=t.parentNode);return!1}function a(t){do{if(!t.hasAttribute)break;if(t.hasAttribute("data-no-instant"))return!1;if(t.hasAttribute("data-instant"))return!0}while(t=t.parentNode);return!1}function o(t,e){for(var n=0;n<W[t].length;n++)W[t][n](e)}function s(e,r,i,a){if(t.title=e,t.documentElement.replaceChild(r,t.body),i){history.pushState(null,null,i);var s=i.indexOf("#"),d=s>-1&&t.getElementById(i.substr(s+1)),l=0;if(d)for(;d.offsetParent;)l+=d.offsetTop,d=d.offsetParent;scrollTo(0,l),T=n(i)}else scrollTo(0,a);m(),K.done(),o("change",!1)}function d(){I=!1,S=!1}function l(t){p(r(t.target).href)}function f(t){var e=r(t.target);e.addEventListener("mouseout",h),k?(E=e.href,w=setTimeout(p,k)):p(e.href)}function c(t){var e=r(t.target);x?e.removeEventListener("mousedown",l):e.removeEventListener("mouseover",f),p(e.href)}function u(t){t.which>1||t.metaKey||t.ctrlKey||(t.preventDefault(),g(r(t.target).href))}function h(){return w?(clearTimeout(w),void(w=!1)):void(I&&!S&&(L.abort(),d()))}function v(){if(!(L.readyState<4)&&0!=L.status){if(D.ready=+new Date-D.start,o("receive"),L.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){var e=t.implementation.createHTMLDocument("");e.documentElement.innerHTML=L.responseText,O=e.title,N=e.body;var r=n(H);C[r]={body:N,title:O,scrollY:r in C?C[r].scrollY:0};for(var i,a,s=e.head.children,d=0,l=s.length-1;l>=0;l--)if(i=s[l],i.hasAttribute("data-instant-track")){a=i.getAttribute("href")||i.getAttribute("src")||i.innerHTML;for(var f=z.length-1;f>=0;f--)z[f]==a&&d++}d!=z.length&&(B=!0)}else B=!0;S&&(S=!1,g(H))}}function m(r){for(var o,s=t.getElementsByTagName("a"),d=e.protocol+"//"+e.host,h=s.length-1;h>=0;h--)o=s[h],o.target||o.hasAttribute("download")||0!=o.href.indexOf(d+"/")||o.href.indexOf("#")>-1&&n(o.href)==T||(A?!a(o):i(o))||(o.addEventListener("touchstart",c),x?o.addEventListener("mousedown",l):o.addEventListener("mouseover",f),o.addEventListener("click",u));if(!r){var v,m,p,g,y=t.body.getElementsByTagName("script");for(h=0,j=y.length;j>h;h++)v=y[h],v.hasAttribute("data-no-instant")||(m=t.createElement("script"),v.src&&(m.src=v.src),v.innerHTML&&(m.innerHTML=v.innerHTML),p=v.parentNode,g=v.nextSibling,p.removeChild(v),p.insertBefore(m,g))}}function p(t){!x&&"display"in D&&+new Date-(D.start+D.display)<100||(w&&(clearTimeout(w),w=!1),t||(t=E),(!I||t!=H&&!S)&&(I=!0,S=!1,H=t,N=!1,B=!1,D={start:+new Date},o("fetch"),L.open("GET",t),L.send()))}function g(t){return"display"in D||(D.display=+new Date-D.start),w?H&&H!=t?void(e.href=t):(p(t),K.start(0,!0),o("wait"),void(S=!0)):!I||S?void(e.href=t):B?void(e.href=H):N?(C[T].scrollY=pageYOffset,d(),void s(O,N,H)):(K.start(0,!0),o("wait"),void(S=!0))}function y(){if(!T){if(!P)return void o("change",!0);for(var r=arguments.length-1;r>=0;r--){var i=arguments[r];i===!0?A=!0:"mousedown"==i?x=!0:"number"==typeof i&&(k=i)}T=n(e.href),C[T]={body:t.body,title:t.title,scrollY:pageYOffset};for(var a,d,l=t.head.children,r=l.length-1;r>=0;r--)a=l[r],a.hasAttribute("data-instant-track")&&(d=a.getAttribute("href")||a.getAttribute("src")||a.innerHTML,z.push(d));L=new XMLHttpRequest,L.addEventListener("readystatechange",v),m(!0),K.init(),o("change",!0),addEventListener("popstate",function(){var t=n(e.href);if(t!=T){if(!(t in C))return void(e.href=e.href);C[T].scrollY=pageYOffset,T=t,s(C[t].title,C[t].body,!1,C[t].scrollY)}})}}function b(t,e){W[t].push(e)}var T,E,w,L,A,x,k,M=navigator.userAgent,Y="createTouch"in t,C={},H=!1,O=!1,B=!1,N=!1,D={},I=!1,S=!1,z=[],W={fetch:[],receive:[],wait:[],change:[]},K=function(){function e(){d=t.createElement("div"),d.id="instantclick",l=t.createElement("div"),l.id="instantclick-bar",l.className="instantclick-bar",d.appendChild(l);var e=["Webkit","Moz","O"];if(f="transform",!(f in l.style))for(var n=0;3>n;n++)e[n]+"Transform"in l.style&&(f=e[n]+"Transform");var r="transition";if(!(r in l.style))for(var n=0;3>n;n++)e[n]+"Transition"in l.style&&(r="-"+e[n].toLowerCase()+"-"+r);var i=t.createElement("style");i.innerHTML="#instantclick{position:"+(Y?"absolute":"fixed")+";top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;"+r+":opacity .25s .1s}.instantclick-bar{background:#29d;width:100%;margin-left:-100%;height:2px;"+r+":all .25s}",t.head.appendChild(i),Y&&(s(),addEventListener("resize",s),addEventListener("scroll",s))}function n(e,n){c=e,t.getElementById(d.id)&&t.body.removeChild(d),d.style.opacity="1",t.getElementById(d.id)&&t.body.removeChild(d),a(),n&&setTimeout(r,0),clearTimeout(u),u=setTimeout(i,500)}function r(){c=10,a()}function i(){c+=1+2*Math.random(),c>=98?c=98:u=setTimeout(i,500),a()}function a(){l.style[f]="translate("+c+"%)",t.getElementById(d.id)||t.body.appendChild(d)}function o(){return t.getElementById(d.id)?(clearTimeout(u),c=100,a(),void(d.style.opacity="0")):(n(100==c?0:c),void setTimeout(o,0))}function s(){d.style.left=pageXOffset+"px",d.style.width=innerWidth+"px",d.style.top=pageYOffset+"px";var t="orientation"in window&&90==Math.abs(orientation),e=innerWidth/screen[t?"height":"width"]*2;d.style[f]="scaleY("+e+")"}var d,l,f,c,u;return{init:e,start:n,done:o}}(),P="pushState"in history&&(!M.match("Android")||M.match("Chrome/"))&&"file:"!=e.protocol;return{supported:P,init:y,on:b}}(document,location);
},{}],2:[function(require,module,exports){
"use strict";function loadCSS(e,t,n){var o=window.document.createElement("link"),s=t||window.document.getElementsByTagName("script")[0];o.rel="stylesheet",o.href=e,o.media="only x",s.parentNode.insertBefore(o,s),setTimeout(function(){o.media=n||"all"})}function loadJS(e,t){var n=window.document.getElementsByTagName("script")[0],o=window.document.createElement("script");return o.src=e,n.parentNode.insertBefore(o,n),t&&(o.onload=t),o}function startCodeHighlighting(){for(var e=document.querySelectorAll("pre code"),t=0,n=e.length;n>t;t++)hljs.highlightBlock(e[t])}var disqusLoaded=!1,ic=require("./instantclick");ic.on("change",function(){function e(){0===window.pageYOffset?window.addEventListener("scroll",function e(){loadJS("//"+disqus_shortname+".disqus.com/embed.js"),window.removeEventListener("scroll",e)}):loadJS("//"+disqus_shortname+".disqus.com/embed.js")}require("./menu").setup(),require("./social").buildShareButtons(),loadCSS("//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"),loadCSS("http://yandex.st/highlightjs/8.0/styles/vs.min.css"),loadJS("//yandex.st/highlightjs/8.0/highlight.min.js",startCodeHighlighting);var t=!!document.getElementById("comments");disqusLoaded&&t&&window.DISQUS&&document.getElementById("comments")&&window.DISQUS.reset({reload:!0}),!disqusLoaded&&t&&(window.disqus_shortname="bdadamcom",e(),disqusLoaded=!0)}),ic.init();
},{"./instantclick":1,"./menu":3,"./social":4}],3:[function(require,module,exports){
module.exports={setup:function(){var e=!0,t=document.getElementById("menu"),n=document.querySelector(".menu-icon");n.addEventListener("click",function(l){e?(t.style.display="block",n.children[0].textContent="close",e=!1):(t.style.display="none",n.children[0].textContent="menu",e=!0),l.preventDefault()})}};
},{}],4:[function(require,module,exports){
function buildShareBar(a){for(var e=encodeURIComponent(document.location.href.replace(document.location.search,"")),r="",t=0,l=links.length;l>t;t++){var n=links[t];r+=n.replace("##url##",e)}a.innerHTML=r}function addListener(a,e,r){a.addEventListener(e,r)}var tracking=require("./tracking"),links=['<a class="btn-share fb" href="https://www.facebook.com/sharer/sharer.php?u=##url##" target="_blank"><i class="fa fa-facebook"></i> Share</a>','<a class="btn-share tw" href="http://twitter.com/share?url=##url##" target="_blank"><i class="fa fa-twitter"></i> Tweet</a>','<a class="btn-share gp" href="https://plus.google.com/share?url=##url##" target="_blank"><i class="fa fa-google-plus"></i> Share</a>','<a class="btn-share li" href="http://www.linkedin.com/shareArticle?mini=true&url=##url##" target="_blank"><i class="fa fa-linkedin"></i> Share</a>','<a class="btn-share cm" href="#comments"><i class="fa fa-comment"></i> Comment</a>'];module.exports={buildShareButtons:function(){for(var a=document.querySelectorAll(".share-bar"),e=0,r=a.length;r>e;e++)buildShareBar(a[e]);for(var t=document.querySelectorAll(".btn-share"),e=0,r=t.length;r>e;e++){var l=t[e];addListener(l,"click",function(){var a=this.className.replace("btn-share ","");tracking.trackEvent("Social","Share",a)})}}};
},{"./tracking":5}],5:[function(require,module,exports){
module.exports={trackEvent:function(n,e,o,t){window.ga&&window.ga("send","event",n,e,o,t)}};
},{}]},{},[2])</script><script data-no-instant>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');</script><script>if (location.hostname !== 'localhost') {
    ga('create', 'UA-47485340-1', 'bdadam.com');
    ga('send', 'pageview', location.pathname + location.search);

    ga('create', 'UA-49233936-1', 'bdadam.com', { name: 'x'});
    ga('x.send', 'pageview', location.pathname + location.search);
}</script></body></html>