<!doctype html>
<html>
<head>
    <meta name="charset" content="utf-8"/>
    <title>Fat arrows for JavaScript</title>
    <meta name="description" content="LINQ and C# like lambda expressions are almost there in JavaScript."/>
    <meta property="og:description" content="I have to admit, I have completely overseen, that fat arrows ( =&gt; ) are coming to JavaScript. The syntax is much the same as in C#. This also means that LINQ is also on its way to the JavaScript world."/>
    <link href="/static/main.css?b5e2d1a1" rel="stylesheet"/>
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/bdadamcom"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="author" content="Adam Beres-Deak"/>
    <meta name="viewport" content="width=device-width"/>
    <script src="/static/main.js?1655fbc9" async></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/static/img/favico/apple-touch-icon-57x57.png"/>
<link rel="apple-touch-icon" sizes="114x114" href="/static/img/favico/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="72x72" href="/static/img/favico/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="144x144" href="/static/img/favico/apple-touch-icon-144x144.png"/>
<link rel="apple-touch-icon" sizes="60x60" href="/static/img/favico/apple-touch-icon-60x60.png"/>
<link rel="apple-touch-icon" sizes="120x120" href="/static/img/favico/apple-touch-icon-120x120.png"/>
<link rel="apple-touch-icon" sizes="76x76" href="/static/img/favico/apple-touch-icon-76x76.png"/>
<link rel="apple-touch-icon" sizes="152x152" href="/static/img/favico/apple-touch-icon-152x152.png"/>
<link rel="icon" type="image/png" href="/static/img/favico/favicon-196x196.png" sizes="196x196"/>
<link rel="icon" type="image/png" href="/static/img/favico/favicon-160x160.png" sizes="160x160"/>
<link rel="icon" type="image/png" href="/static/img/favico/favicon-96x96.png" sizes="96x96"/>
<link rel="icon" type="image/png" href="/static/img/favico/favicon-32x32.png" sizes="32x32"/>
<link rel="icon" type="image/png" href="/static/img/favico/favicon-16x16.png" sizes="16x16"/>
<meta name="msapplication-TileColor" content="#aa2211"/>
<meta name="msapplication-TileImage" content="/static/img/favico/mstile-144x144.png"/>
</head>
<body>
<nav>
    <div class="container">
        <div class="pull-right">
            <a href="/">Home</a>
            
            <a href="/about.html">Contact</a>
        </div>
        <a class="brand" href="/">bdadam.com</a>
    </div>
</nav>


<div class="container">
    <article class="full-post">
        <h1>Fat arrows for JavaScript</h1>
        <p class="legal">
            29th January 2014
            | by <a href="/about.html">Adam Beres-Deak</a>
            
        </p>
        <p class="share-bar"></p>

        <p>I have to admit, I have completely overseen, that fat arrows ( =&gt; ) are coming to JavaScript. The syntax is much the same as in C#. This also means that LINQ is also on its way to the JavaScript world.</p>


        <p>I have to say one thing I really like, when I&#39;m working with C#, is LINQ and the lambda expressions. If you don&#39;t know what they are, here is an example:</p>
<pre><code class="language-C#">var areThereAnySportsCars = cars.Where(x =&gt; x.HorsePower &gt; 300 &amp;&amp; x.Seats == 2).Any(y =&gt; y.Color == &#39;RED&#39;);</code></pre>
<p>I think it&#39;s very easy to see what this expression does: it filters the <code>cars</code> array for cars which have more than 300 HP and exactly 2 seats,
then checks whether there are any red ones.</p>
<h2 id="how-does-it-look-like-in-javascript-">How does it look like in JavaScript?</h2>
<pre><code class="language-JavaScript">var sportsCars = cars.where(x =&gt; x.horsePower &gt; 300 &amp;&amp; x.seats === 2).any(y =&gt; y.Color === &#39;RED&#39;);</code></pre>
<p>Do you notice any differences (besides triple = signs and casing)? No there isn&#39;t.</p>
<h2 id="where-is-the-catch-">Where is the catch?</h2>
<p>Unfortunately there is a catch:
Currently this syntax is only supported in Firefox.
Althought Firefox has been supporting it for more than a year now (almost two), its support is completely missing in Chrome.
But the syntax is in the <a href="http://wiki.ecmascript.org/doku.php?id=harmony:arrow_function_syntax" rel="external,nofollow">ES6 Draft</a>,
so we can hope that Google also decides to support it.</p>
<h2 id="more-examples">More examples</h2>
<pre><code class="language-JavaScript">var sqaure = function(x) { return x * x; };
var squareNew = x =&gt; x * x;

var sum = function(a, b) {return a + b};
var sumNew = (a, b) =&gt; a + b;

domElement.addEventListener(&#39;click&#39;, function(event) { handleEvent(event.target); });
domElement.addEventListener(&#39;click&#39;, event =&gt; handleEvent(event.target));

[1,2,3].map(function(x) { return x + 1; });
[1,2,3].map(x =&gt; x + 1);</code></pre>
<h2 id="what-s-this-">What&#39;s <code>this</code>?</h2>
<p>One of the most complicated things when teaching people JavaScript is to teach what is the value of <code>this</code>.
With fat arrows we get a function expression which has some limitations:</p>
<ol>
<li><code>this</code> is bound to the context, where you use the fat arrow</li>
<li>they cannot be used as a constructor (they throw an error)</li>
</ol>
<p>Some examples:</p>
<pre><code class="language-JavaScript">// With conventional function definitions
var obj = {
    logThis: function() {
        console.log(this); //this is obj
        var log = function() {
            console.log(this); //this is the global object (window)
        };

        log();
    }
};

myObj.logThis();
/*
This call logs:
Object { logThis=function() }
Window
*/

// With fat arrows
var obj = {
    logThis: function() {
        console.log(this); //this is obj
        var log = () =&gt; console.log(this); //this is also obj

        log();
    }
};

obj.logThis();
/*
This call logs:
Object { logThis=function() }
Object { logThis=function() }
*/

var X = a =&gt; a*3;

new X(); // TypeError: X is not a constructor</code></pre>
<h2 id="ok-but-where-is-linq-">OK - but where is LINQ?</h2>
<p>There have always been many LINQ-like implementations in JavaScript. They usually simply take a function expression as a parameter,
so it&#39;s not a big deal to use fat arrows instead of conventional function expressions.</p>
<pre><code class="language-JavaScript">var isThereAnySportsCar = cars.where(function(car) { return car.horsePower &gt; 300; }).any(function(c) { return c.seats === 2; });

var isThereAnySportsCar = cars.where(car =&gt; car.horsePower &gt; 300).any(c =&gt; c.seats === 2);</code></pre>
<p>But LINQ is not just about the syntax. In LINQ every item of the original array goes through the whole pipeline, so that the original array is only iterated once.
In plain old JavaScript (ECMAScript 3) this was impossible. In ES6 generators are coming, which are solving this issue.
I&#39;m not going to go into details now, lets have it for another blog post.</p>
<p>There is <a rel="external,nofollow" href="https://github.com/aaronpowell/linq-in-javascript/">one LINQ implementation</a> which I really like.
It&#39;s far awy from feature completeness, but it shows how it should be done.</p>


        <p class="share-bar"></p>
        <a id="comments"></a>
        <div id="disqus_thread"></div>
        <script>
            var disqus_shortname = 'bdadamcom';
            (function() {
                var d = document.createElement('script'); d.async = true;
                d.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(d, s);
            }());
        </script>
    </article>

    <h4>Latest blog posts</h4>
    
        
            <p><a href="/blog/comparison-helper-for-handlebars.html">Comparison helper for Handlebars.js <span class="muted"><small>13th February 2014</small></span></a></p>
        
    
        
            <p><a href="/blog/one-more-reason-to-check-for-strict-equality-in-javascript.html">One more reason to check for strict equality in JavaScript <span class="muted"><small>12th February 2014</small></span></a></p>
        
    
        
            <p><a href="/blog/finally-always-wins-unless-you-crash-your-computer-meanwhile.html">Finally always wins, unless you crash your computer meanwhile <span class="muted"><small>11th February 2014</small></span></a></p>
        
    
        
            <p><a href="/blog/strange-error-when-installing-npm-package-globally-on-ubuntu.html">Strange error when installing npm package globally on Ubuntu <span class="muted"><small>10th February 2014</small></span></a></p>
        
    
        
            <p><a href="/blog/defining-properties-in-javascript.html">Defining properties in JavaScript <span class="muted"><small>9th February 2014</small></span></a></p>
        
    
</div>

<footer>
    <p>Adam Beres-Deak &copy; 2014 | <a rel="external" href="http://feeds.feedburner.com/bdadamcom">RSS</a></p>
    <p class="legal container">
        Except where otherwise noted, content on this site is licensed under a
        <a href="http://creativecommons.org/licenses/by/4.0/" rel="external,noindex,nofollow">Creative Commons Attribution 4.0 International license</a>.
        Code samples are licensed under the MIT license.
    </p>
</footer>
</body>
</html>